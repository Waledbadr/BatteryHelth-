# Battery Health Analytics (Offline)

An offline Windows battery analytics system with a local Python agent and a Next.js + Tailwind dashboard.

## Project Structure
```
/agent
  battery_agent.py        # Runs powercfg, parses report, outputs JSON
  sample_output.json      # Example schema output
/web
  app/                    # Next.js App Router pages
  components/             # UI building blocks
  lib/analysis.ts         # Analysis logic (health, warnings, insights)
```

## Python Agent (Windows)
The agent runs `powercfg /batteryreport`, parses the HTML report, and outputs a clean JSON schema.

### Run
```bash
python agent/battery_agent.py --output-dir ./agent
```

### Output Schema
```json
{
  "system": { "product": "", "bios": "", "os_build": "", "report_time": "" },
  "battery": {
    "name": "",
    "manufacturer": "",
    "chemistry": "",
    "design_capacity_mwh": 0,
    "full_charge_capacity_mwh": 0,
    "cycle_count": 0
  },
  "health": {
    "health_percentage": 0,
    "degradation_percentage": 0,
    "cycle_penalty": 0,
    "estimated_remaining_life": ""
  },
  "history": [
    {
      "date": "YYYY-MM-DD",
      "full_charge_capacity_mwh": 0,
      "design_capacity_mwh": 0
    }
  ],
  "generated_at": "ISO-8601"
}
```

## Web Dashboard
1. Install dependencies and run the Next.js app:
```bash
cd web
npm install
npm run dev
```
2. Replace `web/public/battery-data.json` with the JSON file generated by the Python agent to refresh the dashboard.
3. (Optional) Use the upload control in the dashboard if you want to preview a different JSON file without replacing the local file.

### Dashboard Sections
- Battery Health Score (0â€“100)
- Capacity degradation chart (Recharts)
- Charge cycle indicator
- Usage pattern insights
- Smart recommendations

## Analysis Logic (Rule-Based)
- **Health** = (Full Charge / Design Capacity) * 100
- **Warning** if health < 70%
- **Critical** if health < 60%
- **Cycle penalty** applies after 500 cycles
- **Rapid drain** detection if recent capacity drop > 1.2 Wh

## Offline by Design
- No cloud dependencies
- JSON file is the only data exchange format
- Works fully offline
